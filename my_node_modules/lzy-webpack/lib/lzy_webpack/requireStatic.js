// 使用静态资源方法(删除路径中的./  ../ /public)
const webpackConfig = require('../../../../webpack.config')

function requireStatic(path) {
    // todo 替换public为static路径
    let staticPath = webpackConfig.devServer.staticPath
    let resPath = path.toString()

    while (resPath.startsWith('/') || resPath.startsWith('./') || resPath.startsWith('../')) {
        if (resPath.startsWith('/')) {
            resPath = resPath.slice(1)
        }
        if (resPath.startsWith('./')) {
            resPath = resPath.slice(2)
        }
        if (resPath.startsWith('../')) {
            resPath = resPath.slice(3)
        }
    }


    if (resPath.startsWith('public')) {
        resPath = resPath.slice(6)
    }

    return resPath
}

module.exports = { requireStatic }